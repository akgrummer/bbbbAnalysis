[configuration]

# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/2018DataPlots_NMSSM_XYH_bbbb_dataDrivenStudies_aidan_2021Dec15/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/DataPlots_fullSubmission_2018_v34_aidan_2021Dec21/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/DataPlots_fullSubmission_2018_v34_aidan_rebinnned_2021Dec23/'
# CR_2022Jan26
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/DataPlots_fullSubmission_2018_v34_aidan_2022Jan26/'
# CR_binwidthX2_2022Jan26
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/DataPlots_fullSubmission_2018_v34_aidan_rebinnned_2021Dec23/'
# VR_2022Jan26
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/DataPlots_fullSubmission_2018_v34_aidan_2022Jan26_VR/'
# VR_binwidthX2_2022Jan26
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/DataPlots_fullSubmission_2018_v34_aidan_rebinnned_2021Dec23_VR/'
# VR region, mass cut mx=600, my=400
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/DataPlots_fullSubmission_2018_v34_aidan_2022Jan26_VR_mx600_my400/'
# CR region, BDT in mass window
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Feb8_BDTmasscut/'
# CR region, BDT in mass window, BDT with ptX
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Feb8_BDTmasscut_ptX/'
# VR region, BDT in mass window
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Feb8_BDTmasscut_VR/'
# VR region, BDT in mass window, BDT with ptX
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Feb8_BDTmasscut_ptX_VR/'
# CR region, BDT only mX mY
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Mar2_only_mXmY/'
# CR region, BDT without mX mY
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Mar2_without_mXmY/'
# VR region, BDT only mX mY
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Mar2_only_mXmY_VR/'
# VR region, BDT without mX mY
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Mar2_without_mXmY_VR/'
# full bdt, ttbar shape
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Mar17_fullBDT_TTBAR_MassWindow_data/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Mar17_fullBDT_TTBAR_MassWindow_data_VR/'
# reordered bins
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Mar25_binsReordered/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Mar25_binsReordered_VR/'
# reordered bins, correct systematics
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Mar28_binsReordered/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/2018DataPlots_2022Mar28_binsReordered_VR/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Jul7_fullBDT_bJetScoreLoose/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Jul7_fullBDT_bJetScoreLoose_VR/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Jul14_fullBDT_bJetScore1p5/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Jul14_fullBDT_bJetScore1p5_VR/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Aug1_fullBDT_bJetLoose_CutLowMx/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Aug1_fullBDT_bJetLoose_CutLowMx_VR/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Aug30_fullBDT_bJetLoose_CutLowMx280/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Aug30_fullBDT_bJetLoose_CutLowMx280_VR/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Sep14_Mx300_bJetLoose_3/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Sep14_Mx300_bJetLoose_3_VR/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Sep14_Mx300_bJetLoose_mx280cut/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Sep14_Mx300_bJetLoose_mx280cut_VR/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Sep14_Mx300_bJetLoose_depth4_leafs50_3/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Sep14_Mx300_bJetLoose_depth4_leafs50_3_VR/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Sep14_Mx300_bJetLoose_depth2_leafs50/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Sep14_Mx300_bJetLoose_depth2_leafs50_VR/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022July/2018DataPlots_2022Oct25_ValRegTrain_bJetLoose_VR/'
directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022Nov/2018DataPlots_2022Nov14_bJetScoreLoose_shapes2/'

processes=["data_BTagCSV","data_BTagCSV_dataDriven_kinFit","${signalTemplate}"]

datas      = ['data_BTagCSV']

sigs  = ["${signalTemplate}"]

bkgs  = ['data_BTagCSV_dataDriven_kinFit']

categandobs= [["selectionbJets_SignalRegion","HH_kinFit_m_H2_m"]]

combinations = []

datacardname='datacard_2018'

dataset='2018'

replacements = {
    'data_BTagCSV' : 'data_obs'}


# folder='/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_13/src/HiggsAnalysis/CombinedLimit/limits/Limits_kinFit_2018/${signalTemplate}'
# folder='/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_13/src/HiggsAnalysis/CombinedLimit/limits/binsReordered_2022Mar28/Limits_kinFit_2018/${signalTemplate}'
# folder='/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_13/src/HiggsAnalysis/CombinedLimit/limits/Limits_kinFit_2018/bJetsLooseSelection_2022July7/${signalTemplate}'
# folder='/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_13/src/HiggsAnalysis/CombinedLimit/limits/localCombineRuns/CombineGoF_2022Oct20/2018/${signalTemplate}'
folder='/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_13/src/HiggsAnalysis/CombinedLimit/limits/localCombineRuns/CombineGoF_2022Oct24_Group0/2018/${signalTemplate}'


[systematics]
syst_list = [
    ['PUWeight'                  , ['_up', '_down'], 'wsyst'    , 'CMS_PU'                  ],
    ['bJet'                      , ['Up' , 'Down' ], 'wsyst'    , 'CMS_eff_b_b_2018'        ],
    ['cJet'                      , ['Up' , 'Down' ], 'wsyst'    , 'CMS_eff_b_c_2018'        ],
    ['lightJet'                  , ['Up' , 'Down' ], 'wsyst'    , 'CMS_eff_b_udsg_2018'     ],
    ['trigger'                   , ['Up' , 'Down' ], 'wsyst'    , 'CMS_trg_eff_2018'        ],

    ##
    ['jer'                       , ['_up', '_down'], 'altsample', 'CMS_res_j_2018'          ],
    ['bjer'                      , ['_up', '_down'], 'altsample', 'CMS_res_j_breg_2018'     ],
    ###
    ['jes_Total'                 , ['_up', '_down'], 'altsample', 'CMS_scale_j_Total_2018'  ],
    ###
    # ['ttbar'                     , ['_up', '_down'], 'altsample'    , 'CMS_bkgShape_2018'       ]
    [''                          , ['upRefined' , 'downRefined' ], 'altsample', 'CMS_bkgShape_2018'       ]
    ]


to_combine = []


[datacard_systematics]
## background
CMS_bkgnorm_2018                  = ['lnN'             , ('data_BTagCSV_dataDriven_kinFit', '${bkgNorm}') ]
CMS_bkgShape_2018                 = ['fromInput:shape' , ('data_BTagCSV_dataDriven_kinFit', '1.000') ]

# signal standard
lumi_13TeV_2018                   = ['lnN'             , ('${signalTemplate}', '1.025') ]
CMS_trg_eff_2018                  = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]


CMS_eff_b_b_2018                  = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]
CMS_eff_b_c_2018                  = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]
CMS_eff_b_udsg_2018               = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]

CMS_PU                            = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]

CMS_scale_j_Total_2018            = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]
CMS_res_j_2018                    = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]
CMS_res_j_breg_2018               = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]

CMS_PS_weights                    = ['lnN'             , ('${signalTemplate}', '1.070') ]

## theory uncertainties


[datacard_groups]
