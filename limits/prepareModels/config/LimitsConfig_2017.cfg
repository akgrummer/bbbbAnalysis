[configuration]

# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022Nov/2017DataPlots_2022Nov14_bJetScoreLoose_shapes2/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022Nov/2017DataPlots_2023Feb28_3/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022Nov/2017DataPlots_2023Feb28_3_trim_VR/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022Nov/2017DataPlots_2023Feb28_3_VR/'
directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022Nov/2017DataPlots_2023Feb28_3_hourglass_unc/'
# directory = '/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_5/src/bbbbAnalysis/VarPlots/rootHists/fullSubmission_2022Nov/2017DataPlots_2023Feb28_3_trim/'

processes=["data_BTagCSV","data_BTagCSV_dataDriven_kinFit","${signalTemplate}"]

datas      = ['data_BTagCSV']

sigs  = ["${signalTemplate}"]

bkgs  = ['data_BTagCSV_dataDriven_kinFit']

categandobs= [["selectionbJets_SignalRegion","HH_kinFit_m_H2_m"]]

combinations = []

datacardname='datacard_2017'

dataset='2017'

replacements = {
    'data_BTagCSV' : 'data_obs'}

# folder is for running locally on lpc
folder='/uscms/home/agrummer/nobackup/DiHiggs_v2/CMSSW_10_2_13/src/HiggsAnalysis/CombinedLimit/limits/localCombineRuns/temp'


[systematics]
syst_list = [
    ['PUWeight'                  , ['_up', '_down'], 'wsyst'    , 'CMS_PU'                  ],
    ['bJet'                      , ['Up' , 'Down' ], 'wsyst'    , 'CMS_eff_b_b_2017'        ],
    ['cJet'                      , ['Up' , 'Down' ], 'wsyst'    , 'CMS_eff_b_c_2017'        ],
    ['lightJet'                  , ['Up' , 'Down' ], 'wsyst'    , 'CMS_eff_b_udsg_2017'     ],
    ['trigger'                   , ['Up' , 'Down' ], 'wsyst'    , 'CMS_trg_eff_2017'        ],
    ['L1PreFiringWeight'         , ['_Up', '_Dn'  ], 'wsyst'    , 'CMS_l1prefiring_2017'    ],
    ###
    ['jer'                       , ['_up', '_down'], 'altsample', 'CMS_res_j_2017'          ],
    ['bjer'                      , ['_up', '_down'], 'altsample', 'CMS_res_j_breg_2017'     ],
    ###
    ['jes_Total'                 , ['_up', '_down'], 'altsample', 'CMS_scale_j_Total_2017'  ],
    ###

    # ['ttbar'                     , ['_up', '_down'], 'altsample'    , 'CMS_bkgShape_2017'       ]
    [''                          , ['upRefined' , 'downRefined' ], 'altsample', 'CMS_bkgShape_2017' ],

    [''                          , ['hourglass_up' , 'hourglass_down' ], 'altsample', 'CMS_hourglassShape_2017' ]
    ]


to_combine = []


[datacard_systematics]
## background
CMS_bkgnorm_2017                  = ['lnN'             , ('data_BTagCSV_dataDriven_kinFit', '${bkgNorm}') ]
CMS_bkgShape_2017                 = ['fromInput:shape' , ('data_BTagCSV_dataDriven_kinFit', '1.000') ]
CMS_hourglassShape_2017           = ['fromInput:shape' , ('data_BTagCSV_dataDriven_kinFit', '1.000') ]

# signal standard
lumi_13TeV_2017                   = ['lnN'             , ('${signalTemplate}', '1.023') ]
CMS_trg_eff_2017                  = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]
CMS_l1prefiring_2017              = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]

CMS_eff_b_b_2017                  = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]
CMS_eff_b_c_2017                  = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]
CMS_eff_b_udsg_2017               = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]

CMS_PU                            = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]

CMS_scale_j_Total_2017            = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]
CMS_res_j_2017                    = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]
CMS_res_j_breg_2017               = ['fromInput:lnN'   , ('${signalTemplate}',  None  ) ]

CMS_PS_weights                    = ['lnN'             , ('${signalTemplate}', '1.070') ]

## theory uncertainties


[datacard_groups]
