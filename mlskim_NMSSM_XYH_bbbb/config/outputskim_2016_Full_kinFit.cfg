[configuration]
year='2016'
directory=['2016']
samples=['Data', 'Data_AntiBtag', 'Data_Plus', 'Data_Plus_AntiBtag']

# skimFolder="/store/user/fravera/bbbb_ntuples/fullSubmission_2016_v27/SKIM_BTagCSV_Data/output/"
skimFolder="/store/user/agrummer/bbbb_ntuples/fullSubmission_2016_v27/SKIM_BTagCSV_Data/output/"

# backgroundWeightName = "BDTweights_2022Jul7_bJetScoreLoose"
# backgroundWeightName = "BDTweights_2022Nov14_bJetScoreLoose_shapeDown"
# backgroundWeightName = "BDTweights_2022Nov14_bJetScoreLoose_shapeUp"
# backgroundWeightName = "BDTweights_2023Feb28"
# backgroundWeightName = "BDTweights_2023Feb28_offshell"
backgroundWeightName = "BDTweights_2023Mar23_offshell_blind_h1h2"
# backgroundWeightName = "BDTweights_2023Feb28_shapeDown"
# backgroundWeightName = "BDTweights_2023Feb28_shapeUp"
# backgroundWeightName = "BDTweights_2023Feb28_sans_mXmY"
# backgroundWeightName = "BDTweights_2023Feb28_only_mXmY"
# backgroundWeightName = "BDTweights_2023Feb28_sans_dfd"
# backgroundWeightName = "BDTweights_2023Feb28_shapeDown_sans_dfd"
# backgroundWeightName = "BDTweights_2023Feb28_shapeUp_sans_dfd"

variables=['IsolatedElectron_pt', 'IsolatedMuon_pt', 'NbJets', 'HLT_DoubleJet90_Double30_TripleBTagCSV_p087_ObjectMatched', 'HLT_QuadJet45_TripleBTagCSV_p087_ObjectMatched', 'HH_m', 'H1_m', 'H2_m', 'HLT_DoubleJet90_Double30_TripleBTagCSV_p087_Fired','HLT_QuadJet45_TripleBTagCSV_p087_Fired', 'H1_kinFit_m', 'HH_kinFit_m', 'H1_b1_deepCSV', 'H1_b2_deepCSV', 'H2_b1_deepCSV', 'H2_b2_deepCSV', 'HLT_Pt2', 'HLT_Pt4', 'HLT_SumPt', 'offShell_H1_m', 'offShell_H2_m'  ]
#variables used for checking the event

trainingVariables = ['H1_b1_kinFit_ptRegressed', 'H1_b2_kinFit_ptRegressed', 'H2_b1_ptRegressed', 'H2_b2_ptRegressed','H1_kinFit_pt', 'H2_pt', 'H1_kinFit_eta', 'H2_eta', 'HH_kinFit_m', 'H1_kinFit_bb_DeltaR', 'H2_bb_DeltaR', 'H2_m', 'distanceFromDiagonal']
# trainingVariables = ['H1_b1_kinFit_ptRegressed', 'H1_b2_kinFit_ptRegressed', 'H2_b1_ptRegressed', 'H2_b2_ptRegressed','H1_kinFit_pt', 'H2_pt', 'H1_kinFit_eta', 'H2_eta', 'HH_kinFit_m', 'H1_kinFit_bb_DeltaR', 'H2_bb_DeltaR', 'H2_m']
# trainingVariables = ['H1_b1_kinFit_ptRegressed', 'H1_b2_kinFit_ptRegressed', 'H2_b1_ptRegressed', 'H2_b2_ptRegressed','H1_kinFit_pt', 'H2_pt', 'H1_kinFit_eta', 'H2_eta', 'H1_kinFit_bb_DeltaR', 'H2_bb_DeltaR']
# trainingVariables = ['HH_kinFit_m', 'H2_m']

# n_estimators=args[0], learning_rate=args[1], max_depth=args[2], min_samples_leaf=args[3],gb_args={'subsample': args[4]}, seed
analysisBackgroundArgument = [500,0.05,4,300,0.6,2020]
analysisClassifierArgument = [100,0.1,2020]
#Notes: #500 - trees #0.05 -learning rate #4 - max depth #300 - min events in the leaf #0.6 - #2020 - seed for bdt, random number generator 

minbjetpt=30
minbjetregressedpt=30
minbjeteta=-2.4
maxbjeteta=2.4

preSelection           = "IsolatedElectron_pt<15 & IsolatedMuon_pt<10 & (( HLT_DoubleJet90_Double30_TripleBTagCSV_p087_Fired==1 & HLT_DoubleJet90_Double30_TripleBTagCSV_p087_ObjectMatched>0 & HLT_Pt2>90 & HLT_Pt4>30 & HLT_SumPt>250 ) | ( HLT_QuadJet45_TripleBTagCSV_p087_Fired==1 & HLT_QuadJet45_TripleBTagCSV_p087_ObjectMatched > 0 & HLT_Pt2>45 & HLT_Pt4>45 & HLT_SumPt>250 ))"
# controlRegionSelection = "( H2_m > 145 | H2_m < 105 ) & ( ( (H1_m > 65) & (H1_m < 95) ) | ( (H1_m > 155) & (H1_m < 185 ) ) )"
# offshell
controlRegionSelection = "( H2_m > 145 | H2_m < 105 ) & ( H1_m > 145 | H1_m < 105 ) &  (offShell_H1_m > 0 & offShell_H2_m > 0) & ( ( (offShell_H1_m > 145) & (offShell_H1_m < 175) ) | ( (offShell_H1_m > 235) & (offShell_H1_m < 265 ) ) )"
# shapeDown
# controlRegionSelection = "( H2_m > 145 | H2_m < 105 ) & ( ( (H1_m > 70) & (H1_m < 90) ) | ( (H1_m > 160) & (H1_m < 180 ) ) )"
# shapeUp
# controlRegionSelection = "( H2_m > 145 | H2_m < 105 ) & ( ( (H1_m > 60) & (H1_m < 100) ) | ( (H1_m > 150) & (H1_m < 190 ) ) )"
bTagSelection          = "NbJets>=4"
antiBTagSelection      = "NbJets==3"
# loose working point:
bTagScoreSelection     = "H1_b1_deepCSV>0.0614 &  H1_b2_deepCSV>0.0614 & H2_b1_deepCSV>0.0614 & H2_b2_deepCSV>0.0614"
addSelection           = "1==1"

threadNumber=4
