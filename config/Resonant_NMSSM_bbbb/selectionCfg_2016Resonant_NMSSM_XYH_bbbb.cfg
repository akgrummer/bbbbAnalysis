# the definition of composed selections. Can contain as well TCut style selections, e.g.:
# resolved = baseline, btagMM, massCut
# resolvedHighPt = baseline, btagMM, massCut, dau1_pt > 150
# use comma separated lists


#########################################################################
#########################################################################

[selections]
HLTOr                 = HLT_DoubleJet90_Double30_TripleBTagCSV_p087_Fired==1 || HLT_QuadJet45_TripleBTagCSV_p087_Fired==1
HLTOrMatched          = HLT_DoubleJet90_Double30_TripleBTagCSV_p087_ObjectMatched==1 || HLT_QuadJet45_TripleBTagCSV_p087_ObjectMatched==1
PtAndEtaBaseCuts      = H1_b1_pt > 30 && H1_b2_pt > 30 && H2_b1_pt > 30 && H2_b2_pt > 30 && abs(H1_b1_eta)<2.4 && abs(H1_b2_eta)<2.4 && abs(H2_b1_eta)<2.4 && abs(H2_b2_eta)<2.4 && H1_b1_ptRegressed > 30 && H1_b2_ptRegressed > 30 && H2_b1_ptRegressed > 30 && H2_b2_ptRegressed > 30 && H1_m > 120-20 && H1_m < 120+20
HLTOrFiredTrgMatched  = HLTOr    , HLTOrMatched
HLTOrFiredPtAndEtaBaseCutsTrgMatched      = HLTOr    , HLTOrMatched    , PtAndEtaBaseCuts
HHselection           = H2_m > 120-20 && H2_m < 120+20


selectionHLTobjectMatching  = HLT_DoubleJet90_Double30_TripleBTagCSV_p087_ObjectMatched > 0 || HLT_QuadJet45_TripleBTagCSV_p087_ObjectMatched > 0
selectionbJetsPt            = H1_b1_pt > 30 && H1_b2_pt > 30 && H2_b1_pt > 30 && H2_b2_pt > 30
selectionbJetsPtRegressed   = H1_b1_ptRegressed > 30 && H1_b2_ptRegressed > 30 && H2_b1_ptRegressed > 30 && H2_b2_ptRegressed > 30
selectionbJetsEta           = H1_b1_eta > -2.4 && H1_b1_eta < 2.4 && H1_b2_eta > -2.4 && H1_b2_eta < 2.4 && H2_b1_eta > -2.4 && H2_b1_eta < 2.4 && H2_b2_eta > -2.4 && H2_b2_eta < 2.4
# selectionHiggsMass          = ((H1_m > 120-40 && H1_m < 120+40) && (H2_m > 120-40 && H2_m < 120+40))
selectionbJets              = selectionbJetsPt, selectionbJetsPtRegressed, selectionbJetsEta
selectionbJetsAndTrigger    = selectionbJetsPt, selectionbJetsPtRegressed, selectionbJetsEta, selectionHLTobjectMatching
selectionbJetsHH            = selectionbJetsPt, selectionbJetsPtRegressed, selectionbJetsEta, HHselection

Full                        = 1
Blinded                     = H2_m > 120+20 || H2_m < 120-20

SignalRegionPlus            = H1_m > 220-20 && H1_m < 220+20
# original
ControlRegionPlus           = (H1_m > 220-40 && H1_m < 220-20) || (H1_m > 220+20 && H1_m < 220+40)
# CR high M_H1
# ControlRegionPlus           = (H1_m > 220+20 && H1_m < 220+40)
# CR low M_H1
# ControlRegionPlus           = (H1_m > 220-40 && H1_m < 220-20)
# CR high M_H2
# ControlRegionPlus           = ( (H1_m > 220-40 && H1_m < 220-20) || (H1_m > 220+20 && H1_m < 220+40) ) && H2_m > 120
# CR low M_H2
# ControlRegionPlus           = ( (H1_m > 220-40 && H1_m < 220-20) || (H1_m > 220+20 && H1_m < 220+40) ) && H2_m < 120
# wide CR
# ControlRegionPlus           = (H1_m > 220-50 && H1_m < 220-20) || (H1_m > 220+20 && H1_m < 220+50)
# narrow CR
# ControlRegionPlus           = (H1_m > 220-30 && H1_m < 220-20) || (H1_m > 220+20 && H1_m < 220+30)



SignalRegionPlusBlinded     = SignalRegionPlus , Blinded
ControlRegionPlusBlinded    = ControlRegionPlus, Blinded

SignalRegion                = H1_m > 120-20 && H1_m < 120+20
ControlRegion               = (H1_m > 120-40 && H1_m < 120-20) || (H1_m > 120+20 && H1_m < 120+40)
ControlRegionBlinded        = ControlRegion, Blinded

GenMatched                  = gen_H1_b1_matchedflag>=0 && gen_H1_b2_matchedflag>=0 && gen_H2_b1_matchedflag>=0 && gen_H2_b2_matchedflag>=0
GenUnMatched                  = gen_H1_b1_matchedflag<0 || gen_H1_b2_matchedflag<0 || gen_H2_b1_matchedflag<0 || gen_H2_b2_matchedflag<0
SignalRegionGenMatched      = SignalRegion, GenMatched
SignalRegionGenUnMatched    = SignalRegion, GenUnMatched

#########################################################################
#########################################################################

[selectionWeights]
selectionJet = bTagScaleFactor_central

#########################################################################
#########################################################################

[sampleWeights]
data_BTagCSV_Plus_Background               = Weight_forBackground
data_BTagCSV_Plus_BackgroundTriggerMatched = Weight_forBackground
data_BTagCSV_Background                    = Weight_forBackground
data_BTagCSV_BackgroundTriggerMatched      = Weight_forBackground
sig_Graviton_1000GeV                       = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS
sig_Graviton_1200GeV                       = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_260GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_270GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_300GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_350GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_400GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_450GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_500GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_550GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_600GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_650GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_750GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS
sig_Graviton_800GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Graviton_900GeV                        = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_260GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_270GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_300GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_350GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_400GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_450GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS
sig_Radion_500GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_550GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_600GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_650GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_750GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_800GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_900GeV                          = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_1000GeV                         = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_Radion_1200GeV                         = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS
sig_privateMC_NMSSM_bbbb_MX_300_MY_60      = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_privateMC_NMSSM_bbbb_MX_400_MY_100     = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_privateMC_NMSSM_bbbb_MX_700_MY_300     = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_privateMC_NMSSM_bbbb_MX_900_MY_200     = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_privateMC_NMSSM_bbbb_MX_1000_MY_700    = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_privateMC_NMSSM_bbbb_MX_1600_MY_700    = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_privateMC_NMSSM_bbbb_MX_1600_MY_1200   = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_privateMC_NMSSM_bbbb_MX_2000_MY_1200   = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 
sig_privateMC_NMSSM_bbbb_MX_2000_MY_1800   = genWeight, PUWeight, LHEPdfWeight, LHEScaleWeight, XS 


#########################################################################
#########################################################################

# define alternative weights to be tested instead of the nominal one
[systematics]
# bTagScaleFactor_central = bJetUp:bTagScaleFactor_bJets_up , bJetDown:bTagScaleFactor_bJets_down, cJetUp:bTagScaleFactor_cJets_up , cJetDown:bTagScaleFactor_cJets_down, lightJetUp:bTagScaleFactor_lightJets_up, lightJetDown:bTagScaleFactor_lightJets_down
# PUWeight                = PUWeight_up, PUWeight_down
# LHEPdfWeight            = LHEPdfWeight_var0, LHEPdfWeight_var1, LHEPdfWeight_var2, LHEPdfWeight_var3, LHEPdfWeight_var4, LHEPdfWeight_var5, LHEPdfWeight_var6, LHEPdfWeight_var7, LHEPdfWeight_var8, LHEPdfWeight_var9, LHEPdfWeight_var10, LHEPdfWeight_var11, LHEPdfWeight_var12, LHEPdfWeight_var13, LHEPdfWeight_var14, LHEPdfWeight_var15, LHEPdfWeight_var16, LHEPdfWeight_var17, LHEPdfWeight_var18, LHEPdfWeight_var19, LHEPdfWeight_var20, LHEPdfWeight_var21, LHEPdfWeight_var22, LHEPdfWeight_var23, LHEPdfWeight_var24, LHEPdfWeight_var25, LHEPdfWeight_var26, LHEPdfWeight_var27, LHEPdfWeight_var28, LHEPdfWeight_var29, LHEPdfWeight_var30, LHEPdfWeight_var31, LHEPdfWeight_var32, LHEPdfWeight_var33, LHEPdfWeight_var34, LHEPdfWeight_var35, LHEPdfWeight_var36, LHEPdfWeight_var37, LHEPdfWeight_var38, LHEPdfWeight_var39, LHEPdfWeight_var40, LHEPdfWeight_var41, LHEPdfWeight_var42, LHEPdfWeight_var43, LHEPdfWeight_var44, LHEPdfWeight_var45, LHEPdfWeight_var46, LHEPdfWeight_var47, LHEPdfWeight_var48, LHEPdfWeight_var49, LHEPdfWeight_var50, LHEPdfWeight_var51, LHEPdfWeight_var52, LHEPdfWeight_var53, LHEPdfWeight_var54, LHEPdfWeight_var55, LHEPdfWeight_var56, LHEPdfWeight_var57, LHEPdfWeight_var58, LHEPdfWeight_var59, LHEPdfWeight_var60, LHEPdfWeight_var61, LHEPdfWeight_var62, LHEPdfWeight_var63, LHEPdfWeight_var64, LHEPdfWeight_var65, LHEPdfWeight_var66, LHEPdfWeight_var67, LHEPdfWeight_var68, LHEPdfWeight_var69, LHEPdfWeight_var70, LHEPdfWeight_var71, LHEPdfWeight_var72, LHEPdfWeight_var73, LHEPdfWeight_var74, LHEPdfWeight_var75, LHEPdfWeight_var76, LHEPdfWeight_var77, LHEPdfWeight_var78, LHEPdfWeight_var79, LHEPdfWeight_var80, LHEPdfWeight_var81, LHEPdfWeight_var82, LHEPdfWeight_var83, LHEPdfWeight_var84, LHEPdfWeight_var85, LHEPdfWeight_var86, LHEPdfWeight_var87, LHEPdfWeight_var88, LHEPdfWeight_var89, LHEPdfWeight_var90, LHEPdfWeight_var91, LHEPdfWeight_var92, LHEPdfWeight_var93, LHEPdfWeight_var94, LHEPdfWeight_var95, LHEPdfWeight_var96, LHEPdfWeight_var97, LHEPdfWeight_var98, LHEPdfWeight_var99, LHEPdfWeight_var100
# LHEScaleWeight          = LHEScaleWeight_var0, LHEScaleWeight_var1, LHEScaleWeight_var2, LHEScaleWeight_var3, LHEScaleWeight_var5, LHEScaleWeight_var6, LHEScaleWeight_var7, LHEScaleWeight_var8

#########################################################################
#########################################################################

# write binning as ROOT declaration: nXbins, xmin, xmax
[histos]
H1_b1_pt            = 100, 0, 500
H1_b2_pt            = 100, 0, 500
H2_b1_pt            = 100, 0, 500
H2_b2_pt            = 100, 0, 500
H1_b1_ptRegressed = 100, 0, 500
H1_b2_ptRegressed = 100, 0, 500
H2_b1_ptRegressed = 100, 0, 500
H2_b2_ptRegressed = 100, 0, 500
H1_b1_deepCSV       = 100, 0, 1
H1_b2_deepCSV       = 100, 0, 1
H2_b1_deepCSV       = 100, 0, 1
H2_b2_deepCSV       = 100, 0, 1
H1_pt               = 300, 0, 1000
H2_pt               = 300, 0, 1000
H1_eta              = 100, -5, 5
H2_eta              = 100, -5, 5
HH_pt               = 100, 0, 500
HH_m                = 300, 0, 3000
# HH_m_kinFit         = 3000, 0, 3000
H1_bb_DeltaR        = 20, 0, 5
H2_bb_DeltaR        = 20, 0, 5
#HH_2DdeltaM         = 100, 0, 600
H1_m                = 100, 50, 250
H2_m                = 300,  0, 3000

# write binning as ROOT declaration: nXbins, xmin, xmax, nYbins, ymin, ymax
[histos2D]
H1_m:H2_m    = 100, 0, 300, 300, 0, 2300
HH_m:H2_m    = 300, 200, 2400, 300, 30, 2300

# user defined binning: if defined, overrides any definition in [histos]
[binning2D] 
HH_m:H2_m@H2_m   = 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 62, 64, 66, 68, 70, 72, 74, 76, 78, 80, 82, 84, 86, 88, 90, 92, 94, 96, 98, 100, 102, 104, 106, 108, 110, 112, 114, 116, 118, 120, 124, 128, 132, 136, 140, 144, 148, 152, 156, 160, 164, 168, 172, 176, 180, 184, 188, 192, 196, 200, 204, 208, 212, 220, 228, 236, 244, 252, 260, 268, 276, 284, 292, 300, 308, 316, 324, 332, 340, 348, 356, 364, 372, 380, 388, 396, 412, 428, 444, 460, 476, 492, 508, 524, 540, 556, 572, 588, 604, 620, 636, 652, 668, 684, 700, 716, 732, 748, 764, 796, 828, 860, 892, 924, 956, 988, 1020, 1052, 1084, 1116, 1148, 1180, 1212, 1244, 1276, 1308, 1340, 1372, 1404, 1436, 1468, 1500, 1564, 1628, 1692, 1756, 1820, 1884, 1948, 2012, 2076, 2140, 2204, 2268, 2332, 2396 
HH_m:H2_m@HH_m   = 200, 204, 208, 212, 216, 220, 224, 228, 232, 236, 240, 244, 248, 252, 256, 260, 264, 268, 272, 276, 280, 284, 288, 292, 296, 300, 304, 308, 312, 316, 320, 324, 328, 332, 336, 340, 344, 348, 352, 360, 368, 376, 384, 392, 400, 408, 416, 424, 432, 440, 448, 456, 464, 472, 480, 488, 496, 504, 512, 520, 528, 536, 544, 552, 560, 568, 576, 584, 592, 600, 608, 616, 624, 632, 640, 648, 656, 672, 688, 704, 720, 736, 752, 768, 784, 800, 816, 832, 848, 864, 880, 896, 912, 928, 944, 960, 976, 992, 1008, 1024, 1040, 1056, 1072, 1088, 1104, 1120, 1136, 1152, 1168, 1184, 1200, 1216, 1232, 1248, 1264, 1296, 1328, 1360, 1392, 1424, 1456, 1488, 1520, 1552, 1584, 1616, 1648, 1680, 1712, 1744, 1776, 1808, 1840, 1872, 1904, 1936, 1968, 2000, 2032, 2064, 2096, 2128, 2160, 2192, 2224, 2256, 2288, 2320, 2352, 2384, 2416, 2448, 2480